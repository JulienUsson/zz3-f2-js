---
import { getCollection } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";

const practices = (await getCollection("practices")).sort((a, b) =>
  b.data.title.localeCompare(a.data.title)
);
---

<!doctype html>
<html lang="fr">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      ul {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 2rem;
        list-style-type: none;
        text-align: center;
        margin: 0;
        padding: 0;
      }
      ul li .title {
        margin-bottom: 16px;
        font-size: 2em;
      }
      ul li a {
        color: inherit;
      }
      ul li img {
        height: 200px;
      }
    </style>
  </head>
  <body>
    <Header />
    <main>
      <ul>
        {
          practices
            .sort(
              (a, b) =>
                a.data.order.valueOf() - b.data.order.valueOf() ||
                a.data.title.localeCompare(b.data.title)
            )
            .map((practice) => (
              <li>
                <h2 class="title">{practice.data.title}</h2>
                {practice.data.slides && (
                  <div>
                    <a href={`/${practice.data.slides}/`}>
                      <img src={`/preview/${practice.data.slides}/1.png`} />
                    </a>
                  </div>
                )}
                {!practice.data.slidesOnly && (
                  <div>
                    <a href={`/practices/${practice.id}/`}>Exercices</a>
                  </div>
                )}
              </li>
            ))
        }
      </ul>
    </main>
    <Footer />
  </body>
</html>
